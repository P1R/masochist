<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Wikitext::Parser
  
    &mdash; Wikitext
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Wikitext::Parser";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (P)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Wikitext.html" title="Wikitext (module)">Wikitext</a></span></span>
     &raquo; 
    <span class="title">Parser</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Wikitext::Parser
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Wikitext::Parser</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>doc/rdoc.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<h1 id="label-Attributes">Attributes</h1>

<h2 id="label-line_ending+-28String-29"><code>line_ending</code> (String)</h2>

<p>The line ending to be used in the generated HTML (defaults to “n”).</p>

<h2 id="label-internal_link_prefix+-28String-29"><code>internal_link_prefix</code> (String)</h2>

<p>The prefix to be prepended to internal links (defaults to “/wiki/”). For example, given an <code>internal_link_prefix</code> of “/wiki/”, the internal link:</p>

<pre class="code wikitext"><code class="wikitext">[[Apple]]
</code></pre>

<p>would be transformed into:</p>

<pre class="code html"><code class="html">&lt;a href=&quot;/wiki/Apple&quot;&gt;Apple&lt;/a&gt;
</code></pre>

<h2 id="label-external_link_class+-28String-29"><code>external_link_class</code> (String)</h2>

<p>The CSS class to be applied to external links (defaults to “external”). For example, given an <code>external_link_class</code> of “external”, the external link:</p>

<pre class="code wikitext"><code class="wikitext">[http://www.google.com/ the best search engine]
</code></pre>

<p>would be transformed into:</p>

<pre class="code html"><code class="html">&lt;a class=&quot;external&quot; href=&quot;http://www.google.com/&quot;&gt;the best search engine&lt;/a&gt;
</code></pre>

<h2 id="label-external_link_rel+-28String-29"><code>external_link_rel</code> (String)</h2>

<p>The <code>rel</code> attribute to be applied to external links (defaults to <code>nil</code>, meaning that no <code>rel</code> attribute is applied). Setting a <code>rel</code> attribute of “nofollow” may be useful for search-engine optimization (see <a href="http://en.wikipedia.org/wiki/Nofollow">en.wikipedia.org/wiki/Nofollow</a> for more details).</p>

<p>This attribute can be set during initialization:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Wikitext.html" title="Wikitext (module)">Wikitext</a></span></span><span class='op'>::</span><span class='const'>Parser</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Wikitext::Parser#initialize (method)">new</a></span></span> <span class='symbol'>:external_link_rel</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nofollow</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>Or via setting an attribute on the parser:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Wikitext.html" title="Wikitext (module)">Wikitext</a></span></span><span class='op'>::</span><span class='const'>Parser</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Wikitext::Parser#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_external_link_rel'>external_link_rel</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nofollow</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>Or at parse time:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Wikitext.html" title="Wikitext (module)">Wikitext</a></span></span><span class='op'>::</span><span class='const'>Parser</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Wikitext::Parser#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span> <span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='symbol'>:external_link_rel</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>nofollow</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>Setting <code>external_link_rel</code> to <code>nil</code> suppresses the emission of any previously configured <code>rel</code> attribute:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span> <span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='symbol'>:external_link_rel</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span>
</code></pre>

<h2 id="label-mailto_class+-28String-29"><code>mailto_class</code> (String)</h2>

<p>The CSS class to be applied to external “mailto” links (defaults to “mailto”). For example:</p>

<pre class="code wikitext"><code class="wikitext">[mailto:user@example.com user@example.com]
</code></pre>

<p>or if autolinking of email addresses is turned on, just:</p>

<pre class="code wikitext"><code class="wikitext">user@example.com
</code></pre>

<p>would be transformed into:</p>

<pre class="code html"><code class="html">&lt;a class=&quot;mailto&quot; href=&quot;mailto:user@example.com&quot;&gt;user@example.com&lt;/a&gt;
</code></pre>

<h2 id="label-img_prefix+-28String-29"><code>img_prefix</code> (String)</h2>

<p>The prefix to be prepended to image tags (defaults to “/images/”). For example, given this image markup:</p>

<pre class="code wikitext"><code class="wikitext">{{foo.png}}
</code></pre>

<p>The following <code>img</code> tag would be produced:</p>

<pre class="code html"><code class="html">&lt;img src=&quot;/images/foo.png&quot; alt=&quot;foo.png&quot; /&gt;
</code></pre>

<h2 id="label-autolink+-28boolean-29"><code>autolink</code> (boolean)</h2>

<p>Whether to autolink URIs found in the plain scope. When true:</p>

<pre class="code wikitext"><code class="wikitext">http://apple.com/
</code></pre>

<p>will be transformed to:</p>

<pre class="code html"><code class="html">&lt;a href=&quot;http://apple.com/&quot;&gt;http://apple.com/&lt;/a&gt;
</code></pre>

<p>and if an external_link_class is set (to “external”, for example) then the transformation will be:</p>

<pre class="code html"><code class="html">&lt;a class=&quot;external&quot; href=&quot;http://apple.com/&quot;&gt;http://apple.com/&lt;/a&gt;
</code></pre>

<p>When false, no transformation will be applied and the link will be echoed literally:</p>

<pre class="code html"><code class="html">http://apple.com/
</code></pre>

<h2 id="label-pre_code+-28boolean-29"><code>pre_code</code> (boolean)</h2>

<p>When true, “pre” blocks are formatted using “code” elements. For example:</p>

<pre class="code wikitext"><code class="wikitext">&lt;pre&gt;foo&lt;/pre&gt;
</code></pre>

<p>Produces:</p>

<pre class="code html"><code class="html">&lt;pre&gt;&lt;code&gt;foo&lt;/code&gt;&lt;/pre&gt;
</code></pre>

<p>When <code>false</code> (the default), it produces:</p>

<pre class="code html"><code class="html">&lt;pre&gt;foo&lt;/pre&gt;
</code></pre>

<h2 id="label-space_to_underscore+-28boolean-29"><code>space_to_underscore</code> (boolean)</h2>

<p>Whether spaces in link targets should be encoded normally or transformed into underscores.</p>

<p>When false, an internal link like:</p>

<pre class="code wikitext"><code class="wikitext">[[foo bar]]
</code></pre>

<p>Would be converted into:</p>

<pre class="code html"><code class="html">&lt;a href=&quot;/wiki/foo%20bar&quot;&gt;foo bar&lt;/a&gt;
</code></pre>

<p>But when true (the default), it would be converted into:</p>

<pre class="code html"><code class="html">&lt;a href=&quot;/wiki/foo_bar&quot;&gt;foo bar&lt;/a&gt;
</code></pre>

<p>Converting spaces to underscores makes most URLs prettier, but it comes at a cost: when this mode is true the articles “foo bar” and “foo_bar” can no longer be disambiguated, and a link to “foo_bar” will actually resolve to “foo bar”; it is therefore recommended that you explicitly disallow underscores in titles at the application level so as to avoid this kind of confusion.</p>

<h2 id="label-base_heading_level+-28integer-29"><code>base_heading_level</code> (integer)</h2>

<p>An integer between 0 and 6 denoting the current “heading level”. This can be used to inform the parser of the “context” in which it is translating markup.</p>

<p>For example, the parser might be translating blog post excerpts on a page where there is an “h1” title element for the page itself and an “h2” title element for each excerpt. In this context it is useful to set <code>base_heading_level</code> to 2, so that any “top level” headings in the markup (that is “h1” elements) can be automatically transformed into “h3” elements so that they appear to be appropriately “nested” inside the containing page elements.</p>

<p>In this way, markup authors can be freed from thinking about which header size they should use and just always start from “h1” for their most general content and work their way down.</p>

<p>An additional benefit is that markup can be used in different contexts at different levels of nesting and the headings will be adjusted to suit automatically with no intervention from the markup author.</p>

<p>Finally, it&#39;s worth noting that in contexts where the user input is not necessarily trusted, this setting can be used to prevent users from inappropriately employing “h1” tags in deeply-nested contexts where they would otherwise disturb the visual harmony of the page.</p>

<h2 id="label-output_style+-28Symbol-29"><code>output_style</code> (Symbol)</h2>

<p>Wikitext emits valid HTML5 fragments. By default, the output syntax is HTML. Optionally, the output syntax can be changed to XML by setting the <code>output_style</code> to “:xml”.</p>

<p>This can be done during initialization:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Wikitext.html" title="Wikitext (module)">Wikitext</a></span></span><span class='op'>::</span><span class='const'>Parser</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Wikitext::Parser#initialize (method)">new</a></span></span> <span class='symbol'>:output_style</span> <span class='op'>=&gt;</span> <span class='symbol'>:xml</span>
</code></pre>

<p>Or via setting an attribute on the parser:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Wikitext.html" title="Wikitext (module)">Wikitext</a></span></span><span class='op'>::</span><span class='const'>Parser</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Wikitext::Parser#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_output_style'>output_style</span> <span class='op'>=</span> <span class='symbol'>:xml</span>
</code></pre>

<p>Or at parse time:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Wikitext.html" title="Wikitext (module)">Wikitext</a></span></span><span class='op'>::</span><span class='const'>Parser</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Wikitext::Parser#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span> <span class='id identifier rubyid_input'>input</span><span class='comma'>,</span> <span class='symbol'>:output_style</span> <span class='op'>=&gt;</span> <span class='symbol'>:xml</span>
</code></pre>

<p>In practice the only difference between the two output syntaxes is that the XML syntax uses self closing <code>img</code> tags:</p>

<pre class="code html"><code class="html">&lt;img src=&quot;foo.png&quot; alt=&quot;Foo&quot; /&gt;
</code></pre>

<p>While the HTML syntax does not:</p>

<pre class="code html"><code class="html">&lt;img src=&quot;foo.png&quot; alt=&quot;Foo&quot;&gt;
</code></pre>

<h2 id="label-link_proc+-28lambda+or+Proc+object-29"><code>link_proc</code> (lambda or Proc object)</h2>

<p>“Red links” can be implemented by providing a custom <code>link_proc</code> block at parse time. This can be used to check for existing or non-existent link targets and apply custom CSS styling accordingly. For example, consider:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_link_proc'>link_proc</span> <span class='op'>=</span> <span class='id identifier rubyid_lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_target'>target</span><span class='op'>|</span> <span class='id identifier rubyid_target'>target</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bar</span><span class='tstring_end'>&#39;</span></span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>redlink</span><span class='tstring_end'>&#39;</span></span> <span class='op'>:</span> <span class='kw'>nil</span> <span class='rbrace'>}</span>
<span class='const'><span class='object_link'><a href="../Wikitext.html" title="Wikitext (module)">Wikitext</a></span></span><span class='op'>::</span><span class='const'>Parser</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Wikitext::Parser#initialize (method)">new</a></span></span><span class='period'>.</span><span class='id identifier rubyid_parse'><span class='object_link'><a href="#parse-instance_method" title="Wikitext::Parser#parse (method)">parse</a></span></span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[[foo]] [[bar]]</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='symbol'>:link_proc</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_link_proc'>link_proc</span>
</code></pre>

<p>This would add the “redlink” CSS class to the “bar” link but not the “foo” link. Please note that if your <code>link_proc</code> involves database queries then you should implement an appropriate caching strategy to ensure that markup with many links does not overwhelm your database.</p>

<p>A <code>link_proc</code> may also be set during initialization:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Wikitext.html" title="Wikitext (module)">Wikitext</a></span></span><span class='op'>::</span><span class='const'>Parser</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Wikitext::Parser#initialize (method)">new</a></span></span> <span class='symbol'>:link_proc</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_link_proc'>link_proc</span>
</code></pre>

<p>Or via setting an attribute on the parser:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Wikitext.html" title="Wikitext (module)">Wikitext</a></span></span><span class='op'>::</span><span class='const'>Parser</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Wikitext::Parser#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_link_proc'>link_proc</span> <span class='op'>=</span> <span class='id identifier rubyid_link_proc'>link_proc</span>
</code></pre>

<p>Many more examples of link procs can be found in the spec suite:</p>
<ul><li>
<p><a href="http://git.wincent.com/wikitext.git/blob/HEAD:/spec/internal_link_spec.rb">git.wincent.com/wikitext.git/blob/HEAD:/spec/internal_link_spec.rb</a></p>
</li></ul>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Parser/Error.html" title="Wikitext::Parser::Error (class)">Error</a></span>, <span class='object_link'><a href="Parser/Token.html" title="Wikitext::Parser::Token (class)">Token</a></span>
    
  
</p>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#encode_link_target-class_method" title="encode_link_target (class method)">.<strong>encode_link_target</strong>(string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>URL-encodes an internal link target for use as an href attribute in an anchor.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sanitize_link_target-class_method" title="sanitize_link_target (class method)">.<strong>sanitize_link_target</strong>(string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sanitizes an internal link target for inclusion within the HTML stream.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#benchmarking_tokenize-instance_method" title="#benchmarking_tokenize (instance method)">#<strong>benchmarking_tokenize</strong>(string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Like the tokenize method feeds <code>string</code> into the scanner to obtain the corresponding tokens, but unlike the tokenize method it does not return them because its sole purpose is to measure the speed of the scanner.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(options = {})  &#x21d2; Parser </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Prepares a Parser instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse-instance_method" title="#parse (instance method)">#<strong>parse</strong>(string, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Parses and transforms the UTF-8 wikitext markup input string into HTML.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tokenize-instance_method" title="#tokenize (instance method)">#<strong>tokenize</strong>(string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Feeds the UTF-8-encoded <code>string</code> into the scanner and returns an array of recognized tokens.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(options = {})  &#x21d2; <tt><span class='object_link'><a href="" title="Wikitext::Parser (class)">Parser</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Prepares a Parser instance.</p>

<p>There are a number of attributes that you can set on the returned parser to customize its behaviour. See the attributes documentation in the Parser class. You also have the option of overriding the attributes at initialization time passing in the attribute name in symbol form together with the overridden value.</p>

<p>In other words, both:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Wikitext.html" title="Wikitext (module)">Wikitext</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Wikitext::Parser (class)">Parser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_autolink'>autolink</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='id identifier rubyid_parser'>parser</span><span class='period'>.</span><span class='id identifier rubyid_mailto_class'>mailto_class</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>And:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_parser'>parser</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Wikitext.html" title="Wikitext (module)">Wikitext</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Wikitext::Parser (class)">Parser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='symbol'>:autolink</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='symbol'>:mailto_class</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mail</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>Are equivalent.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


332
333
334
335</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'doc/rdoc.rb', line 332</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='comment'># This is just a placeholder.
</span>  <span class='comment'># See parser.c for the C source code to this method.
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="encode_link_target-class_method">
  
    .<strong>encode_link_target</strong>(string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>URL-encodes an internal link target for use as an href attribute in an anchor. Expects <code>string</code> to be UTF-8-encoded.</p>

<p>For example, the link target:</p>

<pre class="code wikitext"><code class="wikitext">foo, &quot;bar&quot; &amp; baz €
</code></pre>

<p>would be encoded as:</p>

<pre class="code html"><code class="html">foo%2c%20%22bar%22%20%26%20baz%e2%82%ac
</code></pre>

<p>The encoding is based on RFCs 2396 and 2718. The “unreserved” characters a..z, a..Z, 0..9, “-”, “_”, “.” and “~” are passed through unchanged and all others are converted into percent escapes.</p>

<p>When combined with sanitize_link_target this method can be used to emit the following link for the example article:</p>

<pre class="code html"><code class="html">&lt;a href=&quot;foo%2c%20%22bar%22%20%26%20baz%e2%82%ac&quot;&gt;foo, &amp;quot;bar&amp;quot; &amp;amp; baz &amp;#x20ac;&lt;/a&gt;
</code></pre>

<p>Note that when <code>space_to_underscore</code> is <code>true</code> spaces are treated specially, and are converted to “_” rather than “%20”. For the majority of links this yields much prettier URLs at the cost of some reduction in the namespace of possible titles (this is because when using <code>space_to_underscore</code> you should disallow underscores in article titles to avoid ambiguity between titles like “foo bar” and “foo_bar”).</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


308
309
310
311</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'doc/rdoc.rb', line 308</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_encode_link_target'>encode_link_target</span> <span class='id identifier rubyid_string'>string</span>
  <span class='comment'># This is just a placeholder.
</span>  <span class='comment'># See parser.c for the C source code to this method.
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sanitize_link_target-class_method">
  
    .<strong>sanitize_link_target</strong>(string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sanitizes an internal link target for inclusion within the HTML stream. Expects <code>string</code> to be UTF-8-encoded.</p>

<p>For example, a link target for the article titled:</p>

<pre class="code wikitext"><code class="wikitext">foo, &quot;bar&quot; &amp; baz €
</code></pre>

<p>would be sanitized as:</p>

<pre class="code html"><code class="html">foo, &amp;quot;bar&amp;quot; &amp;amp; baz &amp;#x20ac;
</code></pre>

<p>Note that characters which have special meaning within HTML such as quotes and ampersands are turned into named entities, and characters outside of the printable ASCII range are turned into hexadecimal entities.</p>

<p>See also encode_link_target.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


274
275
276
277</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'doc/rdoc.rb', line 274</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sanitize_link_target'>sanitize_link_target</span> <span class='id identifier rubyid_string'>string</span>
  <span class='comment'># This is just a placeholder.
</span>  <span class='comment'># See parser.c for the C source code to this method.
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="benchmarking_tokenize-instance_method">
  
    #<strong>benchmarking_tokenize</strong>(string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Like the tokenize method feeds <code>string</code> into the scanner to obtain the corresponding tokens, but unlike the tokenize method it does not return them because its sole purpose is to measure the speed of the scanner.</p>

<p>Just like the tokenize method raises a Wikitext::Parser::Error if passed invalid UTF-8 input.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


357
358
359
360</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'doc/rdoc.rb', line 357</span>

<span class='kw'>def</span> <span class='id identifier rubyid_benchmarking_tokenize'>benchmarking_tokenize</span> <span class='id identifier rubyid_string'>string</span>
  <span class='comment'># This is just a placeholder.
</span>  <span class='comment'># See parser.c for the C source code to this method.
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse-instance_method">
  
    #<strong>parse</strong>(string, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Parses and transforms the UTF-8 wikitext markup input string into HTML. Raises a Wikitext::Parser::Error if passed invalid UTF-8. You can customize some aspects of the transformation by setting attributes on the parser instance before calling this method (see the attributes documentation for the Parser class), or by passing in an (optional) options hash.</p>

<p>Options that can be overridden at parse-time include:</p>
<dl class="rdoc-list note-list"><dt><code>indent</code>
<dd>
<p>A non-negative number (to add an arbitrary amount of indentation to all lines in the output) or false (to disable indentation entirely).</p>
</dd><dt><code>base_heading_level</code>
<dd>
<p>An integer between 0 and 6 denoting the current “heading level” (documented above).</p>
</dd><dt><code>output_style</code>
<dd>
<p>A symbol, “:xml”, to emit XML syntax (by default HTML syntax is emitted)</p>
</dd><dt><code>link_proc</code>
<dd>
<p>A lambda that can be used to apply custom CSS to links to produce “red links” (documented above)</p>
</dd></dl>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


382
383
384
385</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'doc/rdoc.rb', line 382</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse'>parse</span> <span class='id identifier rubyid_string'>string</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='comment'># This is just a placeholder.
</span>  <span class='comment'># See parser.c for the C source code to this method.
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tokenize-instance_method">
  
    #<strong>tokenize</strong>(string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Feeds the UTF-8-encoded <code>string</code> into the scanner and returns an array of recognized tokens. Raises a Wikitext::Parser::Error exception if the input string is not valid UTF-8.</p>

<p>Normally you don&#39;t need to invoke this method manually because the parse method automatically sets up a scanner and obtains tokens as it needs them. This method exists for testing and introspection only.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


345
346
347
348</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'doc/rdoc.rb', line 345</span>

<span class='kw'>def</span> <span class='id identifier rubyid_tokenize'>tokenize</span> <span class='id identifier rubyid_string'>string</span>
  <span class='comment'># This is just a placeholder.
</span>  <span class='comment'># See parser.c for the C source code to this method.
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Dec 25 13:57:55 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.16 (ruby-2.6.0).
</div>

    </div>
  </body>
</html>